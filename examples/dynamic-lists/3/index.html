<!doctype html>
<html data-n-head-ssr>
  <head>
    <title>v-shared-element-example</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content=""><base href="/v-shared-element/"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="preconnect" href="https://fonts.gstatic.com"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code&family=Comfortaa:wght@500;700&display=swap"><link rel="preload" href="/v-shared-element/_nuxt/819ce0b.js" as="script"><link rel="preload" href="/v-shared-element/_nuxt/1bee209.js" as="script"><link rel="preload" href="/v-shared-element/_nuxt/4ec7dae.js" as="script"><link rel="preload" href="/v-shared-element/_nuxt/cb23261.js" as="script"><link rel="preload" href="/v-shared-element/_nuxt/65e9d1d.js" as="script"><style data-vue-ssr-id="42f58349:0 6ef14d88:0 87aa1208:0 fa7ff0ca:0 4e8213bc:0 633f2b22:0 c2ce01f4:0 53121e40:0 904fa218:0 615756aa:0">code[class*=language-],pre[class*=language-]{color:#c5c8c6;text-shadow:0 1px rgba(0,0,0,.3);font-family:Inconsolata,Monaco,Consolas,"Courier New",Courier,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#1d1f21}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#7c7c7c}.token.punctuation{color:#c5c8c6}.namespace{opacity:.7}.token.keyword,.token.property,.token.tag{color:#96cbfe}.token.class-name{color:#ffffb6;text-decoration:underline}.token.boolean,.token.constant{color:#9c9}.token.deleted,.token.symbol{color:#f92672}.token.number{color:#ff73fd}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a8ff60}.token.variable{color:#c6c5fe}.token.operator{color:#ededed}.token.entity{color:#ffffb6;cursor:help}.token.url{color:#96cbfe}.language-css .token.string,.style .token.string{color:#87c38a}.token.atrule,.token.attr-value{color:#f9ee98}.token.function{color:#dad085}.token.regex{color:#e9c062}.token.important{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}:root{--green:#4fc08d;--yellow:#f7ba1d;--blue:#4facc0;--white:#fff;--off-white:#fafafa;--cobalt:#35495e;--light-gray:#d9dce0}*{font-family:Comfortaa,sans-serif}body,html{font-size:14px;font-weight:500;color:var(--cobalt)}h1,h2,h3{font-weight:700}h1{font-size:2.441rem}h2{font-size:1.953rem}h3{font-size:1.563rem}h4{font-size:1.25rem}p{font-size:1rem}small{font-size:.8rem}.nuxt-content-highlight *{font-family:"Fira Code",monospace}@media screen and (max-width:550px){html{font-size:10px}p{font-size:14px}}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}body,html{margin:0;padding:0}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;box-sizing:border-box;height:100vh}*,:after,:before{box-sizing:border-box;margin:0;-webkit-tap-highlight-color:transparent}body{background:var(--off-white);min-height:100vh}.fade-in{-webkit-animation:fade-in .5s ease;animation:fade-in .5s ease}@-webkit-keyframes fade-in{0%{opacity:0}}@keyframes fade-in{0%{opacity:0}}.markdown{margin:0 32px;padding-bottom:128px}.markdown h2,.markdown h3,.markdown h4{margin:32px 0}.markdown hr{border:none;height:1px;background:var(--light-gray)}.markdown code{background:rgba(0,0,0,.1);padding:2px 4px;border-radius:4px;font-weight:700}.markdown p{line-height:1.5em;margin:24px 0}.markdown ol{margin:24px 0;padding:0 0 0 48px}.markdown ol li{margin:18px 0;font-size:1rem}.markdown a{color:var(--green);text-decoration:none;border-bottom:2px solid}.markdown a:hover{opacity:.5}.example[data-v-76312807]{width:66.666%;margin:64px auto 0}@media screen and (max-width:550px){.example[data-v-76312807]{width:100%;margin:64px 0 0}}.example header[data-v-76312807]{display:grid;grid-template-columns:165px 1fr 165px;grid-gap:18px 24px;gap:18px 24px;justify-items:center;align-items:start;margin-bottom:18px}.example header h1[data-v-76312807]{text-align:center}.example header .description[data-v-76312807]{grid-area:2/1/3/4}@media screen and (max-width:550px){.example header[data-v-76312807]{grid-template-rows:auto auto auto;grid-template-columns:1fr}.example header .description[data-v-76312807]{grid-area:auto}}.example .contact-list[data-v-76312807]{margin-top:64px;margin-bottom:64px}header[data-v-611108f7]{padding:96px 96px 0;display:flex;align-items:center;justify-content:space-between}@media screen and (max-width:550px){header[data-v-611108f7]{padding:64px 24px 0}}.title[data-v-611108f7]{display:flex;align-items:center;color:inherit;text-decoration:none}.title img[data-v-611108f7]{margin-right:18px}.github-link[data-v-611108f7]{color:inherit}svg.icon{stroke:currentColor;fill:none;margin-bottom:.125em;vertical-align:middle}.button[data-v-216ec536]{padding:12px 32px;border-radius:8px;text-decoration:none;font-size:1rem;border:none;outline:0;cursor:pointer;white-space:nowrap;transition:transform .15s ease}.button[data-v-216ec536]:hover{transform:scale(1.08)}.button[data-v-216ec536]:active{transform:scale(.95)}.button.primary[data-v-216ec536]{background:var(--green);color:var(--off-white);box-shadow:0 16px 32px rgba(79,192,141,.25)}.button.secondary[data-v-216ec536]{background:var(--white);color:var(--cobalt);box-shadow:0 16px 32px rgba(53,73,94,.1)}.button>.icon[data-v-216ec536]{margin-left:10px}.button>.icon.icon-left[data-v-216ec536]{margin-left:0;margin-right:10px}.contacts[data-v-a58f8c16]{width:420px;max-width:90%;margin:auto}.contacts>hr[data-v-a58f8c16]{border:none;height:1px;background:var(--light-gray);margin:24px 0}.contacts .letter-group[data-v-a58f8c16]{display:grid;grid-template-columns:1.953rem 1fr;grid-gap:18px;gap:18px}.contacts .letter-group h2[data-v-a58f8c16]{line-height:64px;text-align:center}.contacts .letter-group .people[data-v-a58f8c16]{padding:0;list-style:none}.contacts .letter-group .people .person a[data-v-a58f8c16]{display:flex;align-items:center;margin-bottom:18px;border-radius:32px;color:inherit;text-decoration:none;transition:background-color .1s ease}.contacts .letter-group .people .person a[data-v-a58f8c16]:hover{background:rgba(0,0,0,.1);cursor:pointer}.contacts .letter-group .people .person a img[data-v-a58f8c16]{width:64px;height:64px;-o-object-fit:cover;object-fit:cover;border-radius:32px;margin-right:24px}.contacts .letter-group .people .person a h4[data-v-a58f8c16]{display:inline-block}.contact[data-v-a58f8c16]{width:100%}.contact header[data-v-a58f8c16]{position:relative;border-bottom:1px solid var(--light-gray)}.contact header .icon[data-v-a58f8c16]{position:absolute;top:18px;color:#fff;right:18px;transition:transform .2s ease}.contact header .icon.back[data-v-a58f8c16]{left:18px;cursor:pointer}.contact header .icon[data-v-a58f8c16]:hover{transform:scale(1.1)}.contact header img[data-v-a58f8c16]{border-radius:16px 16px 0 0;width:100%}.contact header h2[data-v-a58f8c16]{margin:24px 32px 12px;display:inline-block}.contact .actions[data-v-a58f8c16]{display:flex;justify-content:space-around;list-style:none;padding:12px;margin:0 32px;border-bottom:1px solid var(--light-gray)}.contact .actions li[data-v-a58f8c16]{text-align:center}.contact .actions li small[data-v-a58f8c16]{margin-top:8px;display:block}.contact .details[data-v-a58f8c16]{list-style:none;padding:0 32px}.contact .details li[data-v-a58f8c16]{display:grid;grid-template:1fr/24px 1fr;align-items:center;grid-gap:24px;gap:24px}.contact .details li p[data-v-a58f8c16]{height:64px;line-height:64px;border-bottom:1px solid var(--light-gray)}.contacts[data-v-a58f8c16]{background:#fff;box-shadow:0 16px 32px rgba(0,0,0,.1);border-radius:16px;overflow:hidden;padding-bottom:32px}.contacts.with-padding[data-v-a58f8c16]{padding:32px}</style><link rel="preload" href="/v-shared-element/_nuxt/static/1609124223/examples/dynamic-lists/3/payload.js" as="script"><link rel="preload" href="/v-shared-element/_nuxt/static/1609124223/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div><svg width="0" height="0" style="display:none"><symbol id="arrow-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></symbol>
<symbol id="code" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-code"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></symbol>
<symbol id="edit-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></symbol>
<symbol id="eye" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-eye"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></symbol>
<symbol id="gift" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-gift"><polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path></symbol>
<symbol id="github" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></symbol>
<symbol id="message-square" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-message-square"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></symbol>
<symbol id="phone" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-phone"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></symbol>
<symbol id="plus-square" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus-square"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></symbol>
<symbol id="skip-back" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-skip-back"><polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line></symbol>
<symbol id="skip-forward" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-skip-forward"><polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19"></line></symbol>
<symbol id="video" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-video"><polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect></symbol></svg> <div data-v-76312807><header data-v-611108f7 data-v-76312807><a href="/v-shared-element/" class="title nuxt-link-active" data-v-611108f7><img width="64" height="51.5" src="/v-shared-element/_nuxt/img/logo.599b7da.png" alt="v-shared-element logo" class="logo" data-v-611108f7> <h3 data-v-611108f7>
      v-shared-element
    </h3></a> <a target="_blank" rel="noopener" href="https://github.com/justintaddei/v-shared-element" class="github-link fade-in" data-v-611108f7><svg class="icon" style="width:32px;height:32px" data-v-611108f7><use xlink:href="#github"></use></svg></a></header> <main class="example" data-v-76312807><header data-v-76312807><button class="button secondary" data-v-216ec536 data-v-76312807><svg class="icon icon-left" style="width:18px;height:18px" data-v-216ec536><use xlink:href="#skip-back"></use></svg> Go back <!----></button> <h1 data-v-76312807>
        Dynamic list transitions
      </h1> <p class="description" data-v-76312807>
        A basic example of a contacts app
      </p></header> <div class="contacts contact-list" data-v-a58f8c16 data-v-76312807><div class="contact" data-v-a58f8c16><header data-v-a58f8c16><img src="/v-shared-element/_nuxt/img/Betty Hamilton.4864042.jpg" alt="Photo of [object Object]" data-v-a58f8c16> <svg class="icon back" style="width:24px;height:24px" data-v-a58f8c16><use xlink:href="#arrow-left"></use></svg> <svg class="icon" style="width:24px;height:24px" data-v-a58f8c16><use xlink:href="#edit-2"></use></svg> <h2 data-v-a58f8c16>
          Betty Hamilton
        </h2></header> <ul class="actions fade-in" data-v-a58f8c16><li data-v-a58f8c16><svg class="icon" style="width:24px;height:24px" data-v-a58f8c16><use xlink:href="#phone"></use></svg> <small data-v-a58f8c16>Call</small></li> <li data-v-a58f8c16><svg class="icon" style="width:24px;height:24px" data-v-a58f8c16><use xlink:href="#message-square"></use></svg> <small data-v-a58f8c16>Text</small></li> <li data-v-a58f8c16><svg class="icon" style="width:24px;height:24px" data-v-a58f8c16><use xlink:href="#video"></use></svg> <small data-v-a58f8c16>Video</small></li></ul> <ul class="details fade-in" data-v-a58f8c16><li data-v-a58f8c16><svg class="icon" style="width:24px;height:24px" data-v-a58f8c16><use xlink:href="#phone"></use></svg> <p data-v-a58f8c16>(415) 084-2861</p></li> <li data-v-a58f8c16><svg class="icon" style="width:24px;height:24px" data-v-a58f8c16><use xlink:href="#gift"></use></svg> <p data-v-a58f8c16>10 / 23 / 1993</p></li></ul></div></div> <div class="markdown nuxt-content" data-v-76312807 data-v-76312807><hr data-v-76312807 data-v-76312807>
<h2 id="introduction" data-v-76312807 data-v-76312807><a href="#introduction" aria-hidden="true" tabindex="-1" data-v-76312807 data-v-76312807><span class="icon icon-link" data-v-76312807 data-v-76312807></span></a>Introduction</h2>
<p data-v-76312807 data-v-76312807>When dealing with a list of shared-elements, a few challenges present themselves. This is a guid to some of the common pitfalls you may encounter, and how to solve them.</p>
<ol data-v-76312807 data-v-76312807>
<li data-v-76312807 data-v-76312807>Each element in the list needs a unique namespace.</li>
<li data-v-76312807 data-v-76312807>If the list is large enough, performance becomes in issue.</li>
</ol>
<h3 id="unique-namespaces" data-v-76312807 data-v-76312807><a href="#unique-namespaces" aria-hidden="true" tabindex="-1" data-v-76312807 data-v-76312807><span class="icon icon-link" data-v-76312807 data-v-76312807></span></a>Unique namespaces</h3>
<p data-v-76312807 data-v-76312807>Making use of <a href="https://vuejs.org/v2/guide/custom-directive.html#Dynamic-Directive-Arguments" rel="nofollow noopener noreferrer" target="_blank" data-v-76312807 data-v-76312807>Dynamic Directive Arguments</a> takes are of this quite nicely. Let's have a look at the syntax:</p>
<div class="nuxt-content-highlight" data-v-76312807 data-v-76312807><pre class="line-numbers language-html" data-v-76312807 data-v-76312807><code data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;</span>a</span> <span class="token attr-name" data-v-76312807 data-v-76312807><span class="token namespace" data-v-76312807 data-v-76312807>v-directive:</span>[argument]</span><span class="token attr-value" data-v-76312807 data-v-76312807><span class="token punctuation attr-equals" data-v-76312807 data-v-76312807>=</span><span class="token punctuation" data-v-76312807 data-v-76312807>"</span>...<span class="token punctuation" data-v-76312807 data-v-76312807>"</span></span><span class="token punctuation" data-v-76312807 data-v-76312807>></span></span> ... <span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;/</span>a</span><span class="token punctuation" data-v-76312807 data-v-76312807>></span></span>
</code></pre></div>
<p data-v-76312807 data-v-76312807>And here's how we might use that with a <code data-v-76312807 data-v-76312807>v-shared-element</code>:</p>
<div class="nuxt-content-highlight" data-v-76312807 data-v-76312807><pre class="line-numbers language-html" data-v-76312807 data-v-76312807><code data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;</span>li</span>
    <span class="token attr-name" data-v-76312807 data-v-76312807>v-for</span><span class="token attr-value" data-v-76312807 data-v-76312807><span class="token punctuation attr-equals" data-v-76312807 data-v-76312807>=</span><span class="token punctuation" data-v-76312807 data-v-76312807>"</span>person in people<span class="token punctuation" data-v-76312807 data-v-76312807>"</span></span>
    <span class="token attr-name" data-v-76312807 data-v-76312807>:key</span><span class="token attr-value" data-v-76312807 data-v-76312807><span class="token punctuation attr-equals" data-v-76312807 data-v-76312807>=</span><span class="token punctuation" data-v-76312807 data-v-76312807>"</span>person.id<span class="token punctuation" data-v-76312807 data-v-76312807>"</span></span>
    <span class="token attr-name" data-v-76312807 data-v-76312807><span class="token namespace" data-v-76312807 data-v-76312807>v-shared-element:</span>[person.id]</span>
<span class="token punctuation" data-v-76312807 data-v-76312807>></span></span>
    <span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;</span>a</span> <span class="token attr-name" data-v-76312807 data-v-76312807>:href</span><span class="token attr-value" data-v-76312807 data-v-76312807><span class="token punctuation attr-equals" data-v-76312807 data-v-76312807>=</span><span class="token punctuation" data-v-76312807 data-v-76312807>"</span>`/person/${person.id}`<span class="token punctuation" data-v-76312807 data-v-76312807>"</span></span><span class="token punctuation" data-v-76312807 data-v-76312807>></span></span>{{ person.name }}<span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;/</span>a</span><span class="token punctuation" data-v-76312807 data-v-76312807>></span></span>
<span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;/</span>li</span><span class="token punctuation" data-v-76312807 data-v-76312807>></span></span>
</code></pre></div>
<p data-v-76312807 data-v-76312807>Great! Now, on <code data-v-76312807 data-v-76312807>/person/:id</code>, all we need to do is extract the route parameter and we're good to go:</p>
<div class="nuxt-content-highlight" data-v-76312807 data-v-76312807><pre class="line-numbers language-html" data-v-76312807 data-v-76312807><code data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;</span>h2</span> <span class="token attr-name" data-v-76312807 data-v-76312807><span class="token namespace" data-v-76312807 data-v-76312807>v-shared-element:</span>[$route.params.id]</span><span class="token punctuation" data-v-76312807 data-v-76312807>></span></span>...<span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;/</span>h2</span><span class="token punctuation" data-v-76312807 data-v-76312807>></span></span>
</code></pre></div>
<p data-v-76312807 data-v-76312807>Now let's a avatar that is also a shared-element...</p>
<p data-v-76312807 data-v-76312807>Oh, we only have one piece of data—<code data-v-76312807 data-v-76312807>person.id</code>—that is unique. How can we have multiple shared-elements that depend on a single namespace? That's easy, <strong data-v-76312807 data-v-76312807>Namespace All The Things™</strong> ! We're simply going namespace the namespace using template literals. Let's see what that looks like:</p>
<div class="nuxt-content-highlight" data-v-76312807 data-v-76312807><pre class="line-numbers language-html" data-v-76312807 data-v-76312807><code data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;</span>li</span> <span class="token attr-name" data-v-76312807 data-v-76312807>v-for</span><span class="token attr-value" data-v-76312807 data-v-76312807><span class="token punctuation attr-equals" data-v-76312807 data-v-76312807>=</span><span class="token punctuation" data-v-76312807 data-v-76312807>"</span>person in people<span class="token punctuation" data-v-76312807 data-v-76312807>"</span></span> <span class="token attr-name" data-v-76312807 data-v-76312807>:key</span><span class="token attr-value" data-v-76312807 data-v-76312807><span class="token punctuation attr-equals" data-v-76312807 data-v-76312807>=</span><span class="token punctuation" data-v-76312807 data-v-76312807>"</span>person.id<span class="token punctuation" data-v-76312807 data-v-76312807>"</span></span><span class="token punctuation" data-v-76312807 data-v-76312807>></span></span>
    <span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;</span>a</span> <span class="token attr-name" data-v-76312807 data-v-76312807>:href</span><span class="token attr-value" data-v-76312807 data-v-76312807><span class="token punctuation attr-equals" data-v-76312807 data-v-76312807>=</span><span class="token punctuation" data-v-76312807 data-v-76312807>"</span>`/person/${person.id}`<span class="token punctuation" data-v-76312807 data-v-76312807>"</span></span><span class="token punctuation" data-v-76312807 data-v-76312807>></span></span>
        <span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;</span>img</span> <span class="token attr-name" data-v-76312807 data-v-76312807><span class="token namespace" data-v-76312807 data-v-76312807>v-shared-element:</span>[`avatar-${person.id}`]</span> <span class="token attr-name" data-v-76312807 data-v-76312807>:src</span><span class="token attr-value" data-v-76312807 data-v-76312807><span class="token punctuation attr-equals" data-v-76312807 data-v-76312807>=</span><span class="token punctuation" data-v-76312807 data-v-76312807>"</span>person.avatar<span class="token punctuation" data-v-76312807 data-v-76312807>"</span></span> <span class="token punctuation" data-v-76312807 data-v-76312807>/></span></span>

        <span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;</span>h3</span> <span class="token attr-name" data-v-76312807 data-v-76312807><span class="token namespace" data-v-76312807 data-v-76312807>v-shared-element:</span>[`name-${person.id}`]</span><span class="token punctuation" data-v-76312807 data-v-76312807>></span></span>
            {{ person.name }}
        <span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;/</span>h3</span><span class="token punctuation" data-v-76312807 data-v-76312807>></span></span>
    <span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;/</span>a</span><span class="token punctuation" data-v-76312807 data-v-76312807>></span></span>
<span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;/</span>li</span><span class="token punctuation" data-v-76312807 data-v-76312807>></span></span>
</code></pre></div>
<p data-v-76312807 data-v-76312807>Excellent! Now we can have multiple shared-elements that derive their namespace from a single source.</p>
<h3 id="performance-optimizations" data-v-76312807 data-v-76312807><a href="#performance-optimizations" aria-hidden="true" tabindex="-1" data-v-76312807 data-v-76312807><span class="icon icon-link" data-v-76312807 data-v-76312807></span></a>Performance optimizations</h3>
<p data-v-76312807 data-v-76312807>Due to the nature of how the vue-router works, v-shared-element must snapshot every shared-element on the current page before the route changes. The full process is as follows:</p>
<ol data-v-76312807 data-v-76312807>
<li data-v-76312807 data-v-76312807>A link is clicked.</li>
<li data-v-76312807 data-v-76312807><code data-v-76312807 data-v-76312807>beforeEach</code> route guard is called and v-shared-element snapshots every shared-element on the current route.</li>
<li data-v-76312807 data-v-76312807>The route is updated and the page is loaded.</li>
<li data-v-76312807 data-v-76312807>v-shared-element records every shared-element on the <em data-v-76312807 data-v-76312807>new</em> route and, if a match is found against the list from the <em data-v-76312807 data-v-76312807>previous</em> route, the deltas between the two are calculated and the animation begins.</li>
</ol>
<p data-v-76312807 data-v-76312807>The "snapshot" step is the real bottleneck here because it requires cloning every element, and their children, and getting the computed-style of each. Even if that element doesn't exist on the next route, and will be discarded, a snapshot is still taken because there is no way to detect which shared-elements will present on the next route.</p>
<p data-v-76312807 data-v-76312807>In order to speed up this process, v-shared-element provides an option called <code data-v-76312807 data-v-76312807>restrictToRoutes</code>. It acts as a filter which v-shared-element uses to determine if it needs to snapshot a given element or not. It accepts either an <code data-v-76312807 data-v-76312807>array</code> of routes or a <code data-v-76312807 data-v-76312807>function</code> that returns <code data-v-76312807 data-v-76312807>true</code> if a snapshot should be made for the given element. Let's take a look at both.</p>
<h4 id="restricttoroutes-string" data-v-76312807 data-v-76312807><a href="#restricttoroutes-string" aria-hidden="true" tabindex="-1" data-v-76312807 data-v-76312807><span class="icon icon-link" data-v-76312807 data-v-76312807></span></a><code data-v-76312807 data-v-76312807>restrictToRoutes: string[]</code></h4>
<p data-v-76312807 data-v-76312807>Providing an array is useful when there is a fixed set of routes or a single route where the shared-element would need a snapshot taken, but not for other routes.</p>
<p data-v-76312807 data-v-76312807>For example, take the logo at the top left of this page is a shared-element. It only needs to be animated when navigating to the home page because it looks the same on every other route. It's markup looks like this:</p>
<div class="nuxt-content-highlight" data-v-76312807 data-v-76312807><pre class="line-numbers language-html" data-v-76312807 data-v-76312807><code data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;</span>img</span>
    <span class="token attr-name" data-v-76312807 data-v-76312807>src</span><span class="token attr-value" data-v-76312807 data-v-76312807><span class="token punctuation attr-equals" data-v-76312807 data-v-76312807>=</span><span class="token punctuation" data-v-76312807 data-v-76312807>"</span>@/assets/images/logo.png<span class="token punctuation" data-v-76312807 data-v-76312807>"</span></span>
    <span class="token attr-name" data-v-76312807 data-v-76312807><span class="token namespace" data-v-76312807 data-v-76312807>v-shared-element:</span>logo</span><span class="token attr-value" data-v-76312807 data-v-76312807><span class="token punctuation attr-equals" data-v-76312807 data-v-76312807>=</span><span class="token punctuation" data-v-76312807 data-v-76312807>"</span>{
       restrictToRoutes: [<span class="token punctuation" data-v-76312807 data-v-76312807>'</span>/<span class="token punctuation" data-v-76312807 data-v-76312807>'</span>],
    }<span class="token punctuation" data-v-76312807 data-v-76312807>"</span></span>
<span class="token punctuation" data-v-76312807 data-v-76312807>/></span></span>
</code></pre></div>
<p data-v-76312807 data-v-76312807>All set! Now this shared-element will be completely ignored unless we're navigating to the home page.</p>
<h4 id="restricttoroutes-to-from-id--boolean" data-v-76312807 data-v-76312807><a href="#restricttoroutes-to-from-id--boolean" aria-hidden="true" tabindex="-1" data-v-76312807 data-v-76312807><span class="icon icon-link" data-v-76312807 data-v-76312807></span></a><code data-v-76312807 data-v-76312807>restrictToRoutes: (to, from, id) => boolean</code></h4>
<p data-v-76312807 data-v-76312807>In a situation such as the Contacts App above, it's only necessary to take snapshots of the shared-elements related to the selected contact. We'll create a <strong data-v-76312807 data-v-76312807>filter function</strong> to determine which elements to snapshot. This function accepts 3 arguments, <code data-v-76312807 data-v-76312807>to</code>, <code data-v-76312807 data-v-76312807>from</code>, and <code data-v-76312807 data-v-76312807>namespace</code>. The first 2 are vue-router <a href="https://router.vuejs.org/api/#the-route-object" rel="nofollow noopener noreferrer" target="_blank" data-v-76312807 data-v-76312807><code data-v-76312807 data-v-76312807>route</code> objects</a>, and third is the <code data-v-76312807 data-v-76312807>namespace</code> of the given shared-element.</p>
<p data-v-76312807 data-v-76312807>Our filter function looks like this:</p>
<div class="nuxt-content-highlight" data-v-76312807 data-v-76312807><pre class="line-numbers language-js" data-v-76312807 data-v-76312807><code data-v-76312807 data-v-76312807><span class="token keyword module" data-v-76312807 data-v-76312807>export</span> <span class="token keyword module" data-v-76312807 data-v-76312807>default</span> <span class="token punctuation" data-v-76312807 data-v-76312807>{</span>
    methods<span class="token operator" data-v-76312807 data-v-76312807>:</span> <span class="token punctuation" data-v-76312807 data-v-76312807>{</span>
        <span class="token function" data-v-76312807 data-v-76312807>containsRouteId</span><span class="token punctuation" data-v-76312807 data-v-76312807>(</span><span class="token parameter" data-v-76312807 data-v-76312807>to<span class="token punctuation" data-v-76312807 data-v-76312807>,</span> <span class="token keyword module" data-v-76312807 data-v-76312807>from</span><span class="token punctuation" data-v-76312807 data-v-76312807>,</span> namespace</span><span class="token punctuation" data-v-76312807 data-v-76312807>)</span> <span class="token punctuation" data-v-76312807 data-v-76312807>{</span>
            <span class="token comment" data-v-76312807 data-v-76312807>/* 
                Navigating to /person/2
                "avatar-2".includes("2") -> true, snapshot will be taken.

                Navigating to /person/3
                "avatar-2".includes("3") -> false, snapshot will not be taken.
            */</span>
            <span class="token keyword control-flow" data-v-76312807 data-v-76312807>return</span> namespace<span class="token punctuation" data-v-76312807 data-v-76312807>.</span><span class="token method function property-access" data-v-76312807 data-v-76312807>includes</span><span class="token punctuation" data-v-76312807 data-v-76312807>(</span>to<span class="token punctuation" data-v-76312807 data-v-76312807>.</span><span class="token property-access" data-v-76312807 data-v-76312807>params</span><span class="token punctuation" data-v-76312807 data-v-76312807>.</span><span class="token property-access" data-v-76312807 data-v-76312807>id</span><span class="token punctuation" data-v-76312807 data-v-76312807>)</span>
        <span class="token punctuation" data-v-76312807 data-v-76312807>}</span>
    <span class="token punctuation" data-v-76312807 data-v-76312807>}</span>
<span class="token punctuation" data-v-76312807 data-v-76312807>}</span>
</code></pre></div>
<p data-v-76312807 data-v-76312807>Now we can update out list to make use of this new function:</p>
<div class="nuxt-content-highlight" data-v-76312807 data-v-76312807><pre class="line-numbers language-html" data-v-76312807 data-v-76312807><code data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;</span>li</span> <span class="token attr-name" data-v-76312807 data-v-76312807>v-for</span><span class="token attr-value" data-v-76312807 data-v-76312807><span class="token punctuation attr-equals" data-v-76312807 data-v-76312807>=</span><span class="token punctuation" data-v-76312807 data-v-76312807>"</span>person in people<span class="token punctuation" data-v-76312807 data-v-76312807>"</span></span> <span class="token attr-name" data-v-76312807 data-v-76312807>:key</span><span class="token attr-value" data-v-76312807 data-v-76312807><span class="token punctuation attr-equals" data-v-76312807 data-v-76312807>=</span><span class="token punctuation" data-v-76312807 data-v-76312807>"</span>person.id<span class="token punctuation" data-v-76312807 data-v-76312807>"</span></span><span class="token punctuation" data-v-76312807 data-v-76312807>></span></span>
    <span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;</span>a</span> <span class="token attr-name" data-v-76312807 data-v-76312807>:href</span><span class="token attr-value" data-v-76312807 data-v-76312807><span class="token punctuation attr-equals" data-v-76312807 data-v-76312807>=</span><span class="token punctuation" data-v-76312807 data-v-76312807>"</span>`/person/${person.id}`<span class="token punctuation" data-v-76312807 data-v-76312807>"</span></span><span class="token punctuation" data-v-76312807 data-v-76312807>></span></span>
        <span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;</span>img</span> <span class="token attr-name" data-v-76312807 data-v-76312807><span class="token namespace" data-v-76312807 data-v-76312807>v-shared-element:</span>[`avatar-${person.id}`]</span><span class="token attr-value" data-v-76312807 data-v-76312807><span class="token punctuation attr-equals" data-v-76312807 data-v-76312807>=</span><span class="token punctuation" data-v-76312807 data-v-76312807>"</span>{
            restrictToRoutes: containsRouteId
        }<span class="token punctuation" data-v-76312807 data-v-76312807>"</span></span> <span class="token attr-name" data-v-76312807 data-v-76312807>:src</span><span class="token attr-value" data-v-76312807 data-v-76312807><span class="token punctuation attr-equals" data-v-76312807 data-v-76312807>=</span><span class="token punctuation" data-v-76312807 data-v-76312807>"</span>person.avatar<span class="token punctuation" data-v-76312807 data-v-76312807>"</span></span> <span class="token punctuation" data-v-76312807 data-v-76312807>/></span></span>

        <span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;</span>h3</span> <span class="token attr-name" data-v-76312807 data-v-76312807><span class="token namespace" data-v-76312807 data-v-76312807>v-shared-element:</span>[`name-${person.id}`]</span><span class="token attr-value" data-v-76312807 data-v-76312807><span class="token punctuation attr-equals" data-v-76312807 data-v-76312807>=</span><span class="token punctuation" data-v-76312807 data-v-76312807>"</span>{
            restrictToRoutes: containsRouteId
        }<span class="token punctuation" data-v-76312807 data-v-76312807>"</span></span><span class="token punctuation" data-v-76312807 data-v-76312807>></span></span>
            {{ person.name }}
        <span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;/</span>h3</span><span class="token punctuation" data-v-76312807 data-v-76312807>></span></span>
    <span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;/</span>a</span><span class="token punctuation" data-v-76312807 data-v-76312807>></span></span>
<span class="token tag" data-v-76312807 data-v-76312807><span class="token tag" data-v-76312807 data-v-76312807><span class="token punctuation" data-v-76312807 data-v-76312807>&lt;/</span>li</span><span class="token punctuation" data-v-76312807 data-v-76312807>></span></span>
</code></pre></div>
<p data-v-76312807 data-v-76312807>Perfect! No matter how long our list is now we only need to snapshot 2 shared-elements.<br data-v-76312807 data-v-76312807>
If you have any questions, feel free to ask them on <a href="https://github.com/justintaddei/v-shared-element/discussions" rel="nofollow noopener noreferrer" target="_blank" data-v-76312807 data-v-76312807>GitHub Discussions!</a></p></div></main></div></div></div></div><script>window.__NUXT__={staticAssetsBase:"/v-shared-element/_nuxt/static/1609124223",layout:"default",error:null,serverRendered:!0,routePath:"/examples/dynamic-lists/3",config:{content:{dbHash:"c88642b7"}}}</script><script src="/v-shared-element/_nuxt/819ce0b.js" defer></script><script src="/v-shared-element/_nuxt/65e9d1d.js" defer></script><script src="/v-shared-element/_nuxt/1bee209.js" defer></script><script src="/v-shared-element/_nuxt/4ec7dae.js" defer></script><script src="/v-shared-element/_nuxt/cb23261.js" defer></script>
  </body>
</html>
